{% comment %}
  Header section with navigation and cart
{% endcomment %}

<header class="header" data-header>
  <div class="header__inner container">
    <div class="header__logo">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}">
          <img
            src="{{ section.settings.logo | image_url: width: 200 }}"
            alt="{{ shop.name }}"
            width="150"
            height="auto"
            loading="eager"
          >
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="header__logo-text">
          ShedAway
        </a>
      {% endif %}
    </div>

    <nav class="header__nav hide-mobile" role="navigation">
      <ul class="nav__list">
        {% for link in linklists[section.settings.menu].links %}
          <li class="nav__item">
            <a href="{{ link.url }}" class="nav__link">
              {{ link.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </nav>

    <div class="header__actions">
      <button
        class="header__cart-toggle"
        data-cart-toggle
        aria-label="Open cart"
      >
        <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 2L7.17 4H3C1.9 4 1 4.9 1 6v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-4.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" fill="currentColor"/>
        </svg>
        <span class="cart-count" data-cart-count>{{ cart.item_count }}</span>
      </button>

      <button
        class="header__mobile-toggle hide-desktop"
        data-mobile-menu-toggle
        aria-label="Open menu"
      >
        <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>

  {%- comment -%} Mobile Menu {%- endcomment -%}
  <div class="mobile-menu" data-mobile-menu>
    <div class="mobile-menu__header">
      <h3>Menu</h3>
      <button class="mobile-menu__close" data-mobile-menu-close aria-label="Close menu">
        <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
        </svg>
      </button>
    </div>
    <nav class="mobile-menu__nav">
      <ul class="mobile-nav__list">
        {% for link in linklists[section.settings.menu].links %}
          <li class="mobile-nav__item">
            <a href="{{ link.url }}" class="mobile-nav__link">
              {{ link.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </nav>
  </div>
</header>

<style>
  .header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    z-index: 1000;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .header.sticky {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  }

  .header.hidden {
    transform: translateY(-100%);
  }

  .header__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 1rem;
    padding-bottom: 1rem;
    gap: 2rem;
  }

  .header__logo-text {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-secondary);
    text-decoration: none;
  }

  .header__nav {
    flex: 1;
  }

  .nav__list {
    display: flex;
    gap: 2rem;
    list-style: none;
    justify-content: center;
  }

  .nav__link {
    color: var(--color-dark);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
  }

  .nav__link:hover {
    color: var(--color-secondary);
  }

  .header__actions {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .header__cart-toggle,
  .header__mobile-toggle {
    background: none;
    border: none;
    cursor: pointer;
    position: relative;
    padding: 0.5rem;
    color: var(--color-dark);
    transition: color 0.2s ease;
  }

  .header__cart-toggle:hover,
  .header__mobile-toggle:hover {
    color: var(--color-secondary);
  }

  .cart-count {
    position: absolute;
    top: 0;
    right: 0;
    background: var(--color-accent);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease;
  }

  .cart-count.updated {
    transform: scale(1.3);
  }

  /* Mobile Menu */
  .mobile-menu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 80%;
    max-width: 320px;
    height: 100vh;
    background: white;
    z-index: 2000;
    transition: right 0.3s ease;
    box-shadow: -4px 0 12px rgba(0, 0, 0, 0.1);
    padding: 2rem;
  }

  .mobile-menu.active {
    right: 0;
  }

  .mobile-menu__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .mobile-menu__close {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }

  .mobile-nav__list {
    list-style: none;
  }

  .mobile-nav__item {
    margin-bottom: 1rem;
  }

  .mobile-nav__link {
    display: block;
    padding: 0.75rem 0;
    color: var(--color-dark);
    text-decoration: none;
    font-weight: 500;
    font-size: 1.125rem;
  }

  @media (max-width: 768px) {
    .header__inner {
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
    }

    .header__logo-text {
      font-size: 1.25rem;
    }
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
